# SIRFA Agent Finance - Staging Environment Configuration
# This file contains staging environment variables for testing
# DO NOT commit this file to version control with real values

# Application Configuration
NODE_ENV=staging
PORT=3001
API_BASE_URL=https://staging.your-domain.com/api
FRONTEND_URL=https://staging.your-domain.com

# Security Configuration
JWT_SECRET=staging-jwt-secret-key-here
ENCRYPTION_KEY=staging-32-char-encryption-key
SESSION_SECRET=staging-session-secret-key
CORS_ORIGIN=https://staging.your-domain.com

# Database Configuration (RDS MySQL - Staging)
DB_HOST=your-staging-rds-endpoint.rds.ap-southeast-1.rds.aliyuncs.com
DB_PORT=3306
DB_NAME=sirfa_finance_staging
DB_USER=sirfa_staging
DB_PASSWORD=your-staging-database-password
DB_SSL=true
DB_CONNECTION_LIMIT=5
DB_TIMEOUT=60000

# Alibaba Cloud Configuration
ALIBABA_CLOUD_ACCESS_KEY_ID=your-staging-access-key-id
ALIBABA_CLOUD_ACCESS_KEY_SECRET=your-staging-access-key-secret
ALIBABA_CLOUD_REGION=ap-southeast-1
ALIBABA_CLOUD_ACCOUNT_ID=your-account-id

# Function Compute Configuration
FC_ENDPOINT=https://your-account-id.ap-southeast-1.fc.aliyuncs.com
FC_SERVICE_NAME=sirfa-trading-service-staging
FC_FUNCTION_NAME=trading-decision-engine
FC_API_VERSION=2016-08-15

# OSS Configuration
OSS_REGION=ap-southeast-1
OSS_BUCKET=sirfa-app-storage-staging
OSS_ENDPOINT=https://oss-ap-southeast-1.aliyuncs.com
OSS_INTERNAL_ENDPOINT=https://oss-ap-southeast-1-internal.aliyuncs.com

# Log Service Configuration
LOG_PROJECT=sirfa-app-logs-staging
LOG_STORE=app-log-store
LOG_LEVEL=debug
LOG_MAX_FILES=7
LOG_MAX_SIZE=50m

# Alpaca Trading Configuration (Paper Trading)
ALPACA_API_KEY=your-alpaca-paper-api-key
ALPACA_SECRET_KEY=your-alpaca-paper-secret-key
ALPACA_BASE_URL=https://paper-api.alpaca.markets
ALPACA_DATA_URL=https://data.alpaca.markets
ALPACA_STREAM_URL=wss://stream.data.alpaca.markets

# Yahoo Finance Configuration
YAHOO_FINANCE_API_KEY=your-yahoo-finance-api-key
YAHOO_FINANCE_BASE_URL=https://yfapi.net
YAHOO_FINANCE_RATE_LIMIT=100  # requests per minute

# Redis Configuration (Optional - for caching)
REDIS_HOST=your-staging-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-staging-redis-password
REDIS_DB=1
REDIS_TTL=1800  # 30 minutes default TTL

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=200  # per window (more lenient for testing)
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# WebSocket Configuration
WS_PORT=3002
WS_HEARTBEAT_INTERVAL=30000  # 30 seconds
WS_MAX_CONNECTIONS=100

# Monitoring and Health Checks
HEALTH_CHECK_INTERVAL=30000  # 30 seconds
METRICS_ENABLED=true
METRICS_PORT=9090

# Trading Configuration (Conservative for staging)
TRADING_ENABLED=true
MAX_POSITION_SIZE=1000  # USD (smaller for testing)
RISK_MANAGEMENT_ENABLED=true
STOP_LOSS_PERCENTAGE=3  # 3% (tighter for testing)
TAKE_PROFIT_PERCENTAGE=5  # 5%

# AI Agent Configuration
AI_DECISION_TIMEOUT=45000  # 45 seconds (longer for debugging)
AI_CONFIDENCE_THRESHOLD=0.6  # 60% (lower for testing)
AI_MAX_RETRIES=5

# News Feed Configuration
NEWS_REFRESH_INTERVAL=180000  # 3 minutes (more frequent for testing)
NEWS_MAX_ARTICLES=50
NEWS_SENTIMENT_ENABLED=true

# Portfolio Configuration
PORTFOLIO_REFRESH_INTERVAL=15000  # 15 seconds (more frequent for testing)
PORTFOLIO_CACHE_TTL=30  # 30 seconds

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 4 * * *"  # Daily at 4 AM
BACKUP_RETENTION_DAYS=7

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/staging-sirfa.crt
SSL_KEY_PATH=/etc/ssl/private/staging-sirfa.key

# Performance Configuration
CLUSTER_MODE=false  # Single process for easier debugging
WORKER_PROCESSES=1
MAX_MEMORY_USAGE=256  # MB

# Feature Flags (More permissive for testing)
FEATURE_REAL_TRADING=false  # Always false in staging
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_SOCIAL_TRADING=true  # Enable for testing
FEATURE_MOBILE_NOTIFICATIONS=true
FEATURE_DEBUG_MODE=true
FEATURE_MOCK_DATA=false  # Use real APIs in staging